<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animasi Garis Gambar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 90%;
            width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .button-container {
            margin: 20px 0;
        }
        
        button {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        button:hover {
            background-color: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        canvas {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 100%;
            margin-top: 20px;
            transition: filter 0.5s ease;
        }
        
        .blur {
            filter: blur(3px);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            gap: 10px;
        }
        
        .reset-btn {
            background-color: #6c757d;
        }
        
        .reset-btn:hover {
            background-color: #5a6268;
        }
        
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            color: #ff6b6b;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            display: none;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            text-align: left;
        }
        
        .final-message {
            font-size: 24px;
            color: #ff5252;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            display: none;
            animation: fadeIn 1s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 24px;
            }
            
            button {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .message {
                font-size: 16px;
                padding: 10px 20px;
            }
            
            .final-message {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Membuat muka jeje dengan sangat realistik..</h1>
        <div class="button-container">
            <button id="start-btn">Mulai Animasi</button>
        </div>
        <div class="controls">
            <button id="reset-btn" class="reset-btn">Reset</button>
        </div>
        <div id="canvas-container" style="position: relative;">
            <canvas id="drawingCanvas" width="600" height="600"></canvas>
            <div id="wait-message" class="message">Sabar, sedikit lagi<span class="loading">...</span></div>
        </div>
        <div id="final-message" class="final-message">Foto muka kamu sudah jadi! ðŸ˜Š</div>
    </div>

    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const waitMessage = document.getElementById('wait-message');
        const finalMessage = document.getElementById('final-message');
        
        // Menyesuaikan ukuran canvas untuk responsive
        function resizeCanvas() {
            const container = document.querySelector('.container');
            const maxWidth = Math.min(container.clientWidth - 40, 600);
            canvas.style.width = maxWidth + 'px';
            canvas.style.height = maxWidth + 'px';
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // Data titik-titik untuk membentuk wajah dengan garis
        const facePoints = [
            // Outline wajah - oval
            {x: 300, y: 150}, {x: 350, y: 160}, {x: 400, y: 180}, 
            {x: 450, y: 220}, {x: 470, y: 280}, {x: 460, y: 350}, 
            {x: 430, y: 400}, {x: 380, y: 450}, {x: 300, y: 470},
            {x: 220, y: 450}, {x: 170, y: 400}, {x: 140, y: 350},
            {x: 130, y: 280}, {x: 150, y: 220}, {x: 200, y: 180},
            {x: 250, y: 160}, {x: 300, y: 150},
            
            // Mata kiri
            {x: 230, y: 270}, {x: 250, y: 260}, {x: 270, y: 270},
            {x: 250, y: 280}, {x: 230, y: 270},
            
            // Mata kanan
            {x: 330, y: 270}, {x: 350, y: 260}, {x: 370, y: 270},
            {x: 350, y: 280}, {x: 330, y: 270},
            
            // Hidung
            {x: 300, y: 300}, {x: 290, y: 330}, {x: 300, y: 340},
            {x: 310, y: 330}, {x: 300, y: 300},
            
            // Mulut
            {x: 260, y: 370}, {x: 280, y: 390}, {x: 300, y: 400},
            {x: 320, y: 390}, {x: 340, y: 370},
            
            // Alis kiri
            {x: 220, y: 240}, {x: 240, y: 230}, {x: 260, y: 240},
            
            // Alis kanan
            {x: 340, y: 240}, {x: 360, y: 230}, {x: 380, y: 240},
            
            // Hati di samping (decorative)
            {x: 450, y: 300}, {x: 470, y: 270}, {x: 490, y: 300},
            {x: 470, y: 330}, {x: 450, y: 300}
        ];
        
        let animationId = null;
        let currentPoint = 0;
        let isDrawing = false;
        let loadingDotsInterval;
        let messageTimeout;
        let loadingDots = 0;
        
        // Fungsi untuk mengelola titik animasi loading
        function updateLoadingDots() {
            loadingDots = (loadingDots + 1) % 4;
            const dots = '.'.repeat(loadingDots);
            document.querySelector('.loading').textContent = dots + ' '.repeat(3 - loadingDots);
        }
        
        // Fungsi untuk menggambar garis dengan delay
        function drawLine(startX, startY, endX, endY, callback) {
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = '#ff6b6b';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            if (callback) {
                setTimeout(callback, Math.random() * 200 + 100); // Random delay between 100ms and 300ms
            }
        }
        
        // Fungsi untuk menampilkan pesan "sedikit lagi" secara periodik
        function showWaitMessage() {
            // Menampilkan pesan setelah beberapa titik
            if (currentPoint === 5 || currentPoint === 15 || currentPoint === 25 || currentPoint === 35) {
                waitMessage.style.display = 'block';
                
                // Memulai animasi titik loading
                if (!loadingDotsInterval) {
                    loadingDotsInterval = setInterval(updateLoadingDots, 500);
                }
                
                // Menyembunyikan pesan setelah beberapa saat
                clearTimeout(messageTimeout);
                messageTimeout = setTimeout(() => {
                    waitMessage.style.display = 'none';
                }, 3000);
            }
        }
        
        // Fungsi untuk memulai animasi
        function startAnimation() {
            if (isDrawing) return;
            
            isDrawing = true;
            currentPoint = 0;
            startBtn.disabled = true;
            resetBtn.disabled = true;
            finalMessage.style.display = 'none';
            
            // Menambahkan efek blur pada canvas
            canvas.classList.add('blur');
            
            // Menggambar frame pertama
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.moveTo(facePoints[0].x, facePoints[0].y);
            
            // Memulai loading dots animation
            loadingDotsInterval = setInterval(updateLoadingDots, 500);
            
            // Fungsi animasi untuk menggambar titik berikutnya
            function animate() {
                if (currentPoint < facePoints.length - 1) {
                    const startPoint = facePoints[currentPoint];
                    const endPoint = facePoints[currentPoint + 1];
                    
                    // Menampilkan pesan tunggu secara acak
                    showWaitMessage();
                    
                    // Mengurangi blur sedikit demi sedikit
                    if (currentPoint > facePoints.length * 0.7) {
                        canvas.style.filter = `blur(${3 - (currentPoint / facePoints.length) * 3}px)`;
                    }
                    
                    drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y, () => {
                        currentPoint++;
                        animationId = requestAnimationFrame(animate);
                    });
                } else {
                    // Animasi selesai
                    clearInterval(loadingDotsInterval);
                    loadingDotsInterval = null;
                    waitMessage.style.display = 'none';
                    
                    // Menghapus blur secara perlahan
                    canvas.classList.remove('blur');
                    
                    // Menampilkan pesan akhir
                    setTimeout(() => {
                        finalMessage.style.display = 'block';
                        isDrawing = false;
                        startBtn.disabled = false;
                        resetBtn.disabled = false;
                    }, 1000);
                }
            }
            
            // Delay awal untuk menambah antisipasi
            setTimeout(() => {
                animationId = requestAnimationFrame(animate);
            }, 1500);
        }
        
        // Fungsi untuk reset canvas
        function resetCanvas() {
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            
            if (loadingDotsInterval) {
                clearInterval(loadingDotsInterval);
                loadingDotsInterval = null;
            }
            
            if (messageTimeout) {
                clearTimeout(messageTimeout);
            }
            
            waitMessage.style.display = 'none';
            finalMessage.style.display = 'none';
            canvas.classList.remove('blur');
            
            isDrawing = false;
            startBtn.disabled = false;
            resetBtn.disabled = false;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // Menambahkan event listeners
        startBtn.addEventListener('click', startAnimation);
        resetBtn.addEventListener('click', resetCanvas);
        
        // Inisialisasi
        resetCanvas();
    </script>
</body>
</html>
